<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-gb">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>iOS Image Manipulation with UIGestureRecognizer: scale, move, rotate</title>
	<meta name="author" content="Roger Chapman" />
	<link href="http://feeds.feedburner.com/rogchap" rel="alternate" title="Roger Chapman" type="application/atom+xml" />
	<link rel="stylesheet" href="/css/syntax.css" type="text/css" media="all" />
	<link rel="stylesheet" href="/css/screen.css" type="text/css" media="all" />
	<link rel="stylesheet" href="/css/tablet.css" type="text/css" media="screen and (min-width:651px) and (max-width: 1024px), screen and (min-device-width: 768px) and (max-device-width: 1024px)" />
	<link rel="stylesheet" href="/css/mobile.css" type="text/css" media="handheld, screen and (max-width: 650px), screen and (max-device-width: 480px)" />
</head>
<body>
	<div class="site">
		<div class="title"><a href="/">Roger Chapman<br/>rogchap</a></div>
		<div id="post">
	<h1>iOS Image Manipulation with UIGestureRecognizer: scale, move, rotate</h1>
	<p class="meta">10 Jun 2011</p>
	<p>I promised to share with you my code that I used on the <a href="http://itunes.apple.com/us/app/twibbon/id441719849?mt=8&amp;ls=1#">Twibbon iPhone app</a>, to manipulate images using touch gestures. This solution uses <code>UIGestureRecognizer</code>s and therefore only work in iOS 3.2 and above. The full source to a sample applications is available at the end.</p>

<h2 id="setting-up-the-ui">Setting up the UI</h2>

<p>On your main view you first want to set up an <code>UIView</code> that will act as your canvas. This canvas will contain your <code>UIImageView</code> for your photo. Setting the canvas view to <em>Clip Subviews</em> will make sure that your photo view will be masked inside of the canvas.</p>

<h2 id="create-your-uigesturerecognizers">Create your UIGestureRecognizers</h2>

<p>Once we have set up the basic UI we then need to make sure our app responds to your touch gestures on the screen, like so:</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
	<span class="p">[</span><span class="nb">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>

	<span class="bp">UIPinchGestureRecognizer</span> <span class="o">*</span><span class="n">pinchRecognizer</span> <span class="o">=</span> <span class="p">[[[</span><span class="bp">UIPinchGestureRecognizer</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span> <span class="nl">action</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">scale</span><span class="p">:)]</span> <span class="n">autorelease</span><span class="p">];</span>
	<span class="p">[</span><span class="n">pinchRecognizer</span> <span class="nl">setDelegate</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
	<span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addGestureRecognizer</span><span class="p">:</span><span class="n">pinchRecognizer</span><span class="p">];</span>

	<span class="bp">UIRotationGestureRecognizer</span> <span class="o">*</span><span class="n">rotationRecognizer</span> <span class="o">=</span> <span class="p">[[[</span><span class="bp">UIRotationGestureRecognizer</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span> <span class="nl">action</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">rotate</span><span class="p">:)]</span> <span class="n">autorelease</span><span class="p">];</span>
	<span class="p">[</span><span class="n">rotationRecognizer</span> <span class="nl">setDelegate</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
	<span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addGestureRecognizer</span><span class="p">:</span><span class="n">rotationRecognizer</span><span class="p">];</span>

	<span class="bp">UIPanGestureRecognizer</span> <span class="o">*</span><span class="n">panRecognizer</span> <span class="o">=</span> <span class="p">[[[</span><span class="bp">UIPanGestureRecognizer</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span> <span class="nl">action</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">move</span><span class="p">:)]</span> <span class="n">autorelease</span><span class="p">];</span>
	<span class="p">[</span><span class="n">panRecognizer</span> <span class="nl">setMinimumNumberOfTouches</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
	<span class="p">[</span><span class="n">panRecognizer</span> <span class="nl">setMaximumNumberOfTouches</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
	<span class="p">[</span><span class="n">panRecognizer</span> <span class="nl">setDelegate</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
	<span class="p">[</span><span class="n">canvas</span> <span class="nl">addGestureRecognizer</span><span class="p">:</span><span class="n">panRecognizer</span><span class="p">];</span>

	<span class="bp">UITapGestureRecognizer</span> <span class="o">*</span><span class="n">tapProfileImageRecognizer</span> <span class="o">=</span> <span class="p">[[[</span><span class="bp">UITapGestureRecognizer</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTarget</span><span class="p">:</span><span class="nb">self</span> <span class="nl">action</span><span class="p">:</span><span class="k">@selector</span><span class="p">(</span><span class="nl">tapped</span><span class="p">:)]</span> <span class="n">autorelease</span><span class="p">];</span>
	<span class="p">[</span><span class="n">tapProfileImageRecognizer</span> <span class="nl">setNumberOfTapsRequired</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
	<span class="p">[</span><span class="n">tapProfileImageRecognizer</span> <span class="nl">setDelegate</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
	<span class="p">[</span><span class="n">canvas</span> <span class="nl">addGestureRecognizer</span><span class="p">:</span><span class="n">tapProfileImageRecognizer</span><span class="p">];</span>
<span class="p">}</span></code></pre></div>

<p>Youâ€™ll notice that the pinch and rotate actions have been added to the whole view whereas the move has only been added to the <code>canvas</code>; this is because I felt that it gives a better user experience especially as it gives the user more screen to use two fingers.</p>

<h2 id="hook-up-the-manipulation-methods">Hook up the manipulation methods</h2>

<p>Once we have the gestures set up we can now use some animation to manipulate the photo based on the users touch gestures:</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">scale:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span> <span class="p">{</span>

    <span class="k">if</span><span class="p">([(</span><span class="bp">UIPinchGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">state</span><span class="p">]</span> <span class="o">==</span> <span class="n">UIGestureRecognizerStateBegan</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">_lastScale</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">CGFloat</span> <span class="n">scale</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="p">(</span><span class="n">_lastScale</span> <span class="o">-</span> <span class="p">[(</span><span class="bp">UIPinchGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">scale</span><span class="p">]);</span>

    <span class="bp">CGAffineTransform</span> <span class="n">currentTransform</span> <span class="o">=</span> <span class="n">photoImage</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span>
    <span class="bp">CGAffineTransform</span> <span class="n">newTransform</span> <span class="o">=</span> <span class="n">CGAffineTransformScale</span><span class="p">(</span><span class="n">currentTransform</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">scale</span><span class="p">);</span>

    <span class="p">[</span><span class="n">photoImage</span> <span class="nl">setTransform</span><span class="p">:</span><span class="n">newTransform</span><span class="p">];</span>

    <span class="n">_lastScale</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">UIPinchGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">scale</span><span class="p">];</span>
    <span class="p">[</span><span class="nb">self</span> <span class="nl">showOverlayWithFrame</span><span class="p">:</span><span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">];</span>
<span class="p">}</span>

	<span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">rotate</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>

    <span class="k">if</span><span class="p">([(</span><span class="bp">UIRotationGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">state</span><span class="p">]</span> <span class="o">==</span> <span class="n">UIGestureRecognizerStateEnded</span><span class="p">)</span> <span class="p">{</span>

      <span class="n">_lastRotation</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">CGFloat</span> <span class="n">rotation</span> <span class="o">=</span> <span class="mf">0.0</span> <span class="o">-</span> <span class="p">(</span><span class="n">_lastRotation</span> <span class="o">-</span> <span class="p">[(</span><span class="bp">UIRotationGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">rotation</span><span class="p">]);</span>

    <span class="bp">CGAffineTransform</span> <span class="n">currentTransform</span> <span class="o">=</span> <span class="n">photoImage</span><span class="p">.</span><span class="n">transform</span><span class="p">;</span>
    <span class="bp">CGAffineTransform</span> <span class="n">newTransform</span> <span class="o">=</span> <span class="n">CGAffineTransformRotate</span><span class="p">(</span><span class="n">currentTransform</span><span class="p">,</span><span class="n">rotation</span><span class="p">);</span>

    <span class="p">[</span><span class="n">photoImage</span> <span class="nl">setTransform</span><span class="p">:</span><span class="n">newTransform</span><span class="p">];</span>

    <span class="n">_lastRotation</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">UIRotationGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">rotation</span><span class="p">];</span>
    <span class="p">[</span><span class="nb">self</span> <span class="nl">showOverlayWithFrame</span><span class="p">:</span><span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">];</span>
<span class="p">}</span>


<span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">move</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>

  <span class="bp">CGPoint</span> <span class="n">translatedPoint</span> <span class="o">=</span> <span class="p">[(</span><span class="bp">UIPanGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="nl">translationInView</span><span class="p">:</span><span class="n">canvas</span><span class="p">];</span>

  <span class="k">if</span><span class="p">([(</span><span class="bp">UIPanGestureRecognizer</span><span class="o">*</span><span class="p">)</span><span class="n">sender</span> <span class="n">state</span><span class="p">]</span> <span class="o">==</span> <span class="n">UIGestureRecognizerStateBegan</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">_firstX</span> <span class="o">=</span> <span class="p">[</span><span class="n">photoImage</span> <span class="n">center</span><span class="p">].</span><span class="n">x</span><span class="p">;</span>
    <span class="n">_firstY</span> <span class="o">=</span> <span class="p">[</span><span class="n">photoImage</span> <span class="n">center</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="n">translatedPoint</span> <span class="o">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="n">_firstX</span><span class="o">+</span><span class="n">translatedPoint</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">_firstY</span><span class="o">+</span><span class="n">translatedPoint</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>

  <span class="p">[</span><span class="n">photoImage</span> <span class="nl">setCenter</span><span class="p">:</span><span class="n">translatedPoint</span><span class="p">];</span>
  <span class="p">[</span><span class="nb">self</span> <span class="nl">showOverlayWithFrame</span><span class="p">:</span><span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">];</span>
<span class="p">}</span>

<span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">tapped</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>
  <span class="n">_marque</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h1 id="added-bonus-code-snipet-selection-marque-overlay">Added bonus code snipet: selection marque overlay</h1>

<p>Youâ€™ll notice in some of the code above making reference to a <code>_marque</code>, This is the <em>marching ants</em> you see when you have selected the photo and allows you to easily see the boundary line of the image. </p>

<p>First we set up a <code>CAShapeLayer</code> object using QuartzCore:</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">_marque</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">_marque</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">CAShapeLayer</span> <span class="n">layer</span><span class="p">]</span> <span class="k">retain</span><span class="p">];</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UIColor</span> <span class="n">clearColor</span><span class="p">]</span> <span class="bp">CGColor</span><span class="p">];</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UIColor</span> <span class="n">grayColor</span><span class="p">]</span> <span class="bp">CGColor</span><span class="p">];</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">lineJoin</span> <span class="o">=</span> <span class="n">kCALineJoinRound</span><span class="p">;</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">lineDashPattern</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSArray</span> <span class="nl">arrayWithObjects</span><span class="p">:[</span><span class="bp">NSNumber</span> <span class="nl">numberWithInt</span><span class="p">:</span><span class="mi">10</span><span class="p">],[</span><span class="bp">NSNumber</span> <span class="nl">numberWithInt</span><span class="p">:</span><span class="mi">5</span><span class="p">],</span> <span class="nb">nil</span><span class="p">];</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">canvas</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">photoImage</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">canvas</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">[[</span><span class="nb">self</span><span class="p">.</span><span class="n">view</span> <span class="n">layer</span><span class="p">]</span> <span class="nl">addSublayer</span><span class="p">:</span><span class="n">_marque</span><span class="p">];</span></code></pre></div>

<p>Then we show the marque when we move (rotate, resize) the photo and add the <em>marching ants</em> animation.</p>

<div class="highlight"><pre><code class="language-objc" data-lang="objc"><span class="p">-(</span><span class="kt">void</span><span class="p">)</span><span class="nf">showOverlayWithFrame:</span><span class="p">(</span><span class="bp">CGRect</span><span class="p">)</span><span class="nv">frame</span> <span class="p">{</span>

	<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="n">_marque</span> <span class="nl">actionForKey</span><span class="p">:</span><span class="s">@&quot;linePhase&quot;</span><span class="p">])</span> <span class="p">{</span>
		<span class="bp">CABasicAnimation</span> <span class="o">*</span><span class="n">dashAnimation</span><span class="p">;</span>
		<span class="n">dashAnimation</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CABasicAnimation</span> <span class="nl">animationWithKeyPath</span><span class="p">:</span><span class="s">@&quot;lineDashPhase&quot;</span><span class="p">];</span>
		<span class="p">[</span><span class="n">dashAnimation</span> <span class="nl">setFromValue</span><span class="p">:[</span><span class="bp">NSNumber</span> <span class="nl">numberWithFloat</span><span class="p">:</span><span class="mf">0.0f</span><span class="p">]];</span>
		<span class="p">[</span><span class="n">dashAnimation</span> <span class="nl">setToValue</span><span class="p">:[</span><span class="bp">NSNumber</span> <span class="nl">numberWithFloat</span><span class="p">:</span><span class="mf">15.0f</span><span class="p">]];</span>
		<span class="p">[</span><span class="n">dashAnimation</span> <span class="nl">setDuration</span><span class="p">:</span><span class="mf">0.5f</span><span class="p">];</span>
		<span class="p">[</span><span class="n">dashAnimation</span> <span class="nl">setRepeatCount</span><span class="p">:</span><span class="n">HUGE_VALF</span><span class="p">];</span>
		<span class="p">[</span><span class="n">_marque</span> <span class="nl">addAnimation</span><span class="p">:</span><span class="n">dashAnimation</span> <span class="nl">forKey</span><span class="p">:</span><span class="s">@&quot;linePhase&quot;</span><span class="p">];</span>
	<span class="p">}</span>

	<span class="n">_marque</span><span class="p">.</span><span class="n">bounds</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
	<span class="n">_marque</span><span class="p">.</span><span class="n">position</span> <span class="o">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">canvas</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">canvas</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>

	<span class="n">CGMutablePathRef</span> <span class="n">path</span> <span class="o">=</span> <span class="n">CGPathCreateMutable</span><span class="p">();</span>
	<span class="n">CGPathAddRect</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">frame</span><span class="p">);</span>
	<span class="p">[</span><span class="n">_marque</span> <span class="nl">setPath</span><span class="p">:</span><span class="n">path</span><span class="p">];</span>
	<span class="n">CGPathRelease</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>

	<span class="n">_marque</span><span class="p">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>

<h1 id="example-project-and-source-on-github">Example project and source on GitHub</h1>

<p>The full source of the above code is available within my <a href="https://github.com/rogchap/SampleProjects">Sample Projects GitHub account</a> under the <strong>ImageManipulation</strong> folder. Running this app should produce a lovely frame of Steve Jobs:</p>

<p><img src="https://github.com/rogchap/SampleProjects/raw/master/ImageManipulation/Screenshot.png" alt="Image Manipulation iPhone sample app" /></p>



    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
    <g:plusone></g:plusone>

</div>



<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li><span>23 Aug 2013</span> <span class="seperator">~</span> <a href="/2013/08/23/custom-uiview-animations-with-vector-graphics/">Custom UIView Animations with Vector Graphics</a></li>
    
      <li><span>13 Aug 2013</span> <span class="seperator">~</span> <a href="/2013/08/13/simple-ios-dropdown-control-using-uitextfield/">Simple iOS Dropdown Control using UITextField</a></li>
    
      <li><span>07 Feb 2013</span> <span class="seperator">~</span> <a href="/2013/02/07/image-resize-middleware-for-expressjs/">Image Resize Middleware for Express.js</a></li>
    
  </ul>
</div>




<div class="ads">
    <script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Leaderboard -->
    <ins class="adsbygoogle"
         style="display:inline-block;width:728px;height:90px"
         data-ad-client="ca-pub-3092587044574000"
         data-ad-slot="3996431372"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</div>

<div class="comments">
	<h3>Comments</h3>
	<noscript>Please enable JavaScript to view the comments</noscript>
	<div id="disqus_thread"></div>
</div>
<script type="text/javascript">
    var disqus_shortname = 'rogchap'; 
    var disqus_identifier = '/2011/06/10/ios-image-manipulation-with-uigesturerecognizer-scale-move-rotate';
    var disqus_url = 'http://rogchap.com/2011/06/10/ios-image-manipulation-with-uigesturerecognizer-scale-move-rotate/';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

		<div class="footer">
			<div class="contact">
				<p>
					Roger Chapman<br/>
					Application Development Evangelist<br/>
					&#114;&#111;&#103;&#99;&#104;&#97;&#112;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;
				</p>
			</div>
			<div class="contact">
				<p>
					<a href="http://github.com/rogchap/">github.com/rogchap</a><br />
					<a href="http://twitter.com/rogchap/">twitter.com/rogchap</a><br />
					<a href="http://linkedin.com/in/rogchap/">linkedin.com/in/rogchap</a>
				</p>
			</div>
		 	<div class="rss">
				<a href="http://feeds.feedburner.com/rogchap">RSS Feed</a>
			</div>
		</div>
	</div>

    <script type="text/javascript">
        var _gaq = _gaq || [];
        var pluginUrl = '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
        _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
        _gaq.push(['_setAccount', 'UA-4155555-8']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script>
</body>
<html>